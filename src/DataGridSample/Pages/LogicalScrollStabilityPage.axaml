<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:DataGridSample.Models"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.LogicalScrollStabilityPage"
             x:DataType="viewModels:LogicalScrollStabilityViewModel">
  <UserControl.DataContext>
    <viewModels:LogicalScrollStabilityViewModel />
  </UserControl.DataContext>

  <Grid RowDefinitions="Auto,*"
        Margin="12"
        RowSpacing="8">
    <StackPanel Grid.Row="0"
                Spacing="4">
      <TextBlock Classes="h2">Logical scroll stability repro</TextBlock>
      <TextBlock TextWrapping="Wrap"
                 Text="Avalonia-only repro of the reported stuck wheel behavior in deep tabbed hosts. Toggle UseLogicalScrollable and scroll up/down repeatedly." />
    </StackPanel>

    <TabControl Grid.Row="1">
      <TabItem Header="Main Host">
        <Border Padding="8"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                BorderThickness="1"
                CornerRadius="4">
          <TabControl>
            <TabItem Header="Workspace">
              <Border Padding="8"
                      BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                      BorderThickness="1"
                      CornerRadius="4">
                <Grid RowDefinitions="Auto,*"
                      RowSpacing="8">
                  <StackPanel Orientation="Horizontal"
                              Spacing="8">
                    <TextBlock VerticalAlignment="Center"
                               Text="UseLogicalScrollable" />
                    <ToggleSwitch IsChecked="{Binding ElementName=StabilityGrid, Path=UseLogicalScrollable, Mode=TwoWay}" />
                  </StackPanel>

                  <TabControl Grid.Row="1">
                    <TabItem Header="ProDataGrid">
                      <Border Padding="8"
                              BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                              BorderThickness="1"
                              CornerRadius="4">
                        <DataGrid x:Name="StabilityGrid"
                                  ItemsSource="{Binding Items}"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  GridLinesVisibility="All"
                                  HeadersVisibility="All"
                                  UseLogicalScrollable="True">
                          <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="70" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="160" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="110" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Owner" Binding="{Binding Owner}" Width="120" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}" Width="90" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Price" Binding="{Binding Price}" Width="90" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Delta" Binding="{Binding Delta}" Width="90" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Score" Binding="{Binding Score}" Width="90" x:DataType="models:LogicalScrollStabilityRow" />
                            <DataGridTextColumn Header="Ratio" Binding="{Binding Ratio}" Width="90" x:DataType="models:LogicalScrollStabilityRow" />
                          </DataGrid.Columns>
                        </DataGrid>
                      </Border>
                    </TabItem>
                    <TabItem Header="Details">
                      <TextBlock TextWrapping="Wrap"
                                 Text="This extra tab increases visual-tree depth similarly to docked document hosts." />
                    </TabItem>
                  </TabControl>
                </Grid>
              </Border>
            </TabItem>
            <TabItem Header="Tool Window">
              <StackPanel Spacing="4">
                <TextBlock Text="Tool content placeholder" />
                <TextBlock Text="Keeps hierarchy deep without external docking libraries."
                           TextWrapping="Wrap" />
              </StackPanel>
            </TabItem>
          </TabControl>
        </Border>
      </TabItem>
      <TabItem Header="Secondary Host">
        <TextBlock Text="Secondary top-level tab."
                   TextWrapping="Wrap" />
      </TabItem>
    </TabControl>
  </Grid>
</UserControl>

<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:dg="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
             xmlns:models="clr-namespace:DataGridSample.Models"
             xmlns:viewModels="clr-namespace:DataGridSample.ViewModels"
             x:Class="DataGridSample.Pages.PivotTablePage"
             x:DataType="viewModels:PivotTableViewModel">
  <UserControl.DataContext>
    <viewModels:PivotTableViewModel />
  </UserControl.DataContext>

  <TabControl Margin="12">
    <TabItem Header="Pivot">
      <Grid RowDefinitions="Auto,*"
            RowSpacing="12">
        <StackPanel Spacing="6">
          <TextBlock Classes="h2">Pivot Tables</TextBlock>
          <TextBlock Text="Model-driven pivot tables with row/column fields, totals, and percent displays."
                     TextWrapping="Wrap" />

          <WrapPanel>
            <StackPanel Spacing="4">
              <TextBlock Text="Region filter" />
              <ComboBox Width="170"
                        ItemsSource="{Binding RegionOptions}"
                        SelectedItem="{Binding SelectedRegion}" />
            </StackPanel>
            <StackPanel Spacing="4">
              <TextBlock Text="Values position" />
              <ComboBox Width="170"
                        ItemsSource="{Binding ValuesPositions}"
                        SelectedItem="{Binding ValuesPosition}" />
            </StackPanel>
            <StackPanel Spacing="4">
              <TextBlock Text="Row layout" />
              <ComboBox Width="170"
                        ItemsSource="{Binding RowLayouts}"
                        SelectedItem="{Binding RowLayout}" />
            </StackPanel>
            <StackPanel Spacing="4">
              <TextBlock Text="Display mode" />
              <ComboBox Width="200"
                        ItemsSource="{Binding DisplayModes}"
                        SelectedItem="{Binding DisplayMode}" />
            </StackPanel>
          </WrapPanel>

          <WrapPanel>
            <CheckBox Content="Row subtotals" IsChecked="{Binding ShowRowSubtotals}" />
            <CheckBox Content="Column subtotals" IsChecked="{Binding ShowColumnSubtotals}" />
            <CheckBox Content="Row grand totals" IsChecked="{Binding ShowRowGrandTotals}" />
            <CheckBox Content="Column grand totals" IsChecked="{Binding ShowColumnGrandTotals}" />
            <CheckBox Content="Repeat row labels" IsChecked="{Binding RepeatRowLabels}" />
          </WrapPanel>
        </StackPanel>

        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Pivot.Rows}"
                  ColumnDefinitionsSource="{Binding Pivot.ColumnDefinitions}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  HeadersVisibility="All"
                  CanUserResizeColumns="True"
                  CanUserReorderColumns="True"
                  RowHeight="32" />
      </Grid>
    </TabItem>
    <TabItem Header="Data">
      <Grid RowDefinitions="Auto,*"
            RowSpacing="8">
        <StackPanel Spacing="4">
          <TextBlock Classes="h2">Source data</TextBlock>
          <TextBlock Text="Rows used by the pivot table." TextWrapping="Wrap" />
          <CheckBox Content="Show filtered data" IsChecked="{Binding ShowFilteredData}" />
        </StackPanel>

        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding DataRows}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  HeadersVisibility="All"
                  CanUserResizeColumns="True"
                  CanUserReorderColumns="True"
                  RowHeight="28">
          <DataGrid.Columns>
            <DataGridTextColumn Header="Order Date" Binding="{Binding OrderDate, StringFormat=d}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridTextColumn Header="Region" Binding="{Binding Region}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridTextColumn Header="Segment" Binding="{Binding Segment}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridTextColumn Header="Product" Binding="{Binding Product}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridNumericColumn Header="Sales" Binding="{Binding Sales}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridNumericColumn Header="Profit" Binding="{Binding Profit}" Width="*" x:DataType="models:SalesRecord" />
            <DataGridNumericColumn Header="Units" Binding="{Binding Quantity}" Width="*" x:DataType="models:SalesRecord" />
          </DataGrid.Columns>
        </DataGrid>
      </Grid>
    </TabItem>
  </TabControl>
</UserControl>
